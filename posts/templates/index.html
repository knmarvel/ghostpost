{% extends 'base.html' %}
{% block content %}
    <div class="make-ghost-post">
    <h3>Make a ghost post:</h3>
    <div class="ghost-post-form">
    <form action="" method="post">
        {% csrf_token %} {{ ghostpost_form.as_p }}
    <input type="submit" value="Post, ghost!" />
    </form>
    </div>
    {% if private_url %}
    <span class="private-url-announcement"> 
        <h4>
        Please note: to delete your most recent post, go to <a href="ghostpost/{{ private_url }}">ghostpost/{{ private_url }}</a>
        This message will disappear after any action on this page, so if you're the sort to have regrets, write that url down now.
        </h4>
    </span>
    
{% endif %}
</div>
    <div class="ghost-posts">

        <br />
        <div class="sort-and-filter-buttons">
            <ul class="filter-tabs">
                <li class='{% if current_path == "/" %}selected-tab {% endif %} filter-tab'>
                    <a href="/" >All</a>
                </li>
                <li class='{% if current_path == "/roasts" %}selected-tab {% endif %} filter-tab'>
                    <a href="/roasts" >Roasts</a>
                </li>
                <li class='{% if current_path == "/boasts" %}selected-tab {% endif %} filter-tab'>
                    <a href="/boasts">Boasts</a>
                </li>
            </ul>
            <form action="" method="post">
                {% csrf_token %} {{ sort_form }}
            <input type="submit" value="Sort posts" />
            </form>
        </div>
        {% if ghost_posts %}
            {% for post in ghost_posts %}
            <div class="post-div-{{post.boast}}">
            
            <button class="upvote-button"><a href="{% url 'upvotes' pk=post.pk %}">Upvote</a></button>
            <button class="downvote-button"><a href="{% url 'downvotes' pk=post.pk %}">Downvote</a></button>
            <span class="post-datetime">{{ post.datetime }}</span>
            <span class="post-score"> {{ post.score }} </span>
            <span class="post-type-{{post.boast}}"">{% if post.boast %} BOAST {% else %} ROAST {% endif %} </span>
            <span class="post-text"><a href="{% url 'ghostpost_public_detail' pk=post.pk %}"> {{ post.text }} </a></span>
            </div>
            {% endfor %}
        {% endif %}
    </div>
{% endblock %} 